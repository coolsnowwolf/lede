From b5a3eaec6a4ba859602a286fcb5034cf3f25fc55 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=C3=81lvaro=20Fern=C3=A1ndez=20Rojas?= <noltari@gmail.com>
Date: Tue, 30 Dec 2025 14:35:03 +0100
Subject: [PATCH] Makefile: fix CFLAGS with linux 6.15+
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Ensure EXTRA_CFLAGS are taken into account.

Signed-off-by: Álvaro Fernández Rojas <noltari@gmail.com>
---
 src/Makefile | 2 ++
 1 file changed, 2 insertions(+)

--- a/src/Makefile
+++ b/src/Makefile
@@ -121,6 +121,8 @@ ifneq ($(KERNELRELEASE),)
 	ifeq ($(ENABLE_GIGA_LITE), y)
 		EXTRA_CFLAGS += -DENABLE_GIGA_LITE
 	endif
+
+	ccflags-y += $(EXTRA_CFLAGS)
 else
 	BASEDIR := /lib/modules/$(shell uname -r)
 	KERNELDIR ?= $(BASEDIR)/build
