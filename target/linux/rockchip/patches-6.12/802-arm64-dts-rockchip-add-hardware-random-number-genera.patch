From e5b5361651940ff5c0c1784dfd0130abec7ab535 Mon Sep 17 00:00:00 2001
From: wevsty <ty@wevs.org>
Date: Mon, 24 Aug 2020 02:27:11 +0800
Subject: [PATCH] arm64: dts: rockchip: add hardware random number generator
 for RK3328 and RK3399

Adding Hardware Random Number Generator Resources to the RK3328 and RK3399.

Signed-off-by: wevsty <ty@wevs.org>
---

--- a/arch/arm64/boot/dts/rockchip/rk356x.dtsi
+++ b/arch/arm64/boot/dts/rockchip/rk356x.dtsi
@@ -1132,10 +1132,10 @@
 	};
 
 	rng: rng@fe388000 {
-		compatible = "rockchip,rk3568-rng";
+		compatible = "rockchip,cryptov2-rng";
 		reg = <0x0 0xfe388000 0x0 0x4000>;
 		clocks = <&cru CLK_TRNG_NS>, <&cru HCLK_TRNG_NS>;
-		clock-names = "core", "ahb";
+		clock-names = "clk_trng", "hclk_trng";
 		resets = <&cru SRST_TRNG_NS>;
 		status = "disabled";
 	};
--- a/arch/arm64/boot/dts/rockchip/rk3588-base.dtsi
+++ b/arch/arm64/boot/dts/rockchip/rk3588-base.dtsi
@@ -1857,6 +1857,16 @@
 		status = "disabled";
 	};
 
+	rng: rng@fe378000 {
+		compatible = "rockchip,trngv1";
+		reg = <0x0 0xfe378000 0x0 0x200>;
+		interrupts = <GIC_SPI 400 IRQ_TYPE_LEVEL_HIGH>;
+		clocks = <&scmi_clk SCMI_HCLK_SECURE_NS>;
+		clock-names = "hclk_trng";
+		resets = <&scmi_reset SRST_H_TRNG_NS>;
+		reset-names = "reset";
+	};
+
 	sdhci: mmc@fe2e0000 {
 		compatible = "rockchip,rk3588-dwcmshc";
 		reg = <0x0 0xfe2e0000 0x0 0x10000>;
